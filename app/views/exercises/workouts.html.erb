<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>About</title>
  <%= stylesheet_link_tag "style.css" %>
  <%= stylesheet_link_tag "navbar.css" %>
  <style>
    .grid-container {
      display: grid;
      column-gap: 10px;
      row-gap: 10px;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      padding: 10px;
    }
    .grid-item {
      background-color: rgba(255, 255, 255, 0.8);
      border: 2px solid rgba(0, 0, 0, 0.8);
      padding: 10px;
      font-size: 20px;
      text-align: center;
      color: black;
      cursor: pointer;
    }
    .item-content {
      height: 0;
      overflow: hidden;
      transition: height 0.3s;
    }
    .expanded {
      height: auto;
    }
    p {
    color: #0b0b0b;
    font-size: 1.5vw;
    text-align: left;
    }
        .search-bar {
      margin-bottom: 20px;
    }
  
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropbtn {
      background-color: #3498db;
      color: white;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    .dropdown-content {
      display:none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
      z-index: 1;
    }
    .dropdown-content input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
    }
  
    .dropdown-content option {
      padding: 8px;
      display: block;
      cursor: pointer;
    }
    .dropdown-content option:hover {
      background-color: #f1f1f1;
    }
    .show {
      display: block;
    }
  
    </style>
</head>
<body>
  <div class="navbar">
    <div class="navbar-group">
      <div class="logo">
        <%= image_tag "SFU_logo.png", class: "logo" %>
        <p class="logo">Fitness App</p>
      </div>
    </div>
    <div class="navbar-group">
      <%= link_to 'Home', root_path, class: "nav" %>
      <%= link_to 'About', about_path, class: "nav" %>
      <div class="dropdown">
        <button class="dropbtn">Explore</button>
        <div class="dropdown-content">
          <% if logged_in? %>
            <%= link_to 'Exercises', workoutslike_path %>
          <% else %>
            <%= link_to 'Exercises', exercises_path %>
          <% end %>
          <%= link_to 'Equipment', equipment_path %>
          <%= link_to 'Schedule', schedule_path %>
        </div>
      </div>
      <% if logged_in? %>
        <%= link_to "Account", account_path, class: "buttonnav" %>
      <% else %>
        <%= link_to "Login", login_path, class: "buttonnav" %>
      <% end %>
    </div>
  </div>
  <div class="navbar-spacing"></div>
<section class="about">

    <div class="search-bar">
    <div class="dropdown">
      <button onclick="toggleDropdown()" class="dropbtn">Select Muscle</button>
      <div id="muscleDropdown" class="dropdown-content">
        <input type="text" placeholder="Search.." id="muscleInput" onkeyup="filterMuscles()">
        <option value="Triceps">Triceps</option>
        <option value="Pectoral">Pectoral Muscles</option>
        <option value="Shoulder">Shoulder Muscles</option>
        <option value="Quadriceps">Quadriceps</option>
        <option value="Hamstrings">Hamstrings</option>
        <option value="Glutes">Glutes</option>
      </div>
    </div>
  </div>

  <h1>Exercises</h1>
  <p>Tracking your fitness progress at SFU! All exercises and activities suggested 
  can be completed at the SFU Recreation Centre on SFU's Burnaby Campus</p>

  <div class="grid-container">
    <% @exercises.each do |exercise| %>
      <div class="grid-item">
        <h2><%= exercise.name %></h2>
        <p><strong>Category:</strong> <%= exercise.category %></p>
        <p><strong>Targets:</strong> <%= exercise.targets %></p>
        <p><strong>Equipment Needed:</strong> <%= exercise.equipment_needed %></p>
        <div class="item-content">
          <p><strong>Set Up:<br></strong> <%= strip_tags(exercise.set_up).gsub(/(\r)?\n/, "<br/>").html_safe %></p>
          <p><strong>Description:<br></strong> <%= strip_tags(exercise.description).gsub(/(\r)?\n/, "<br/>").html_safe %></p>
          <p><strong>Key Points:<br></strong> <%= strip_tags(exercise.key_points).gsub(/(\r)?\n/, "<br/>").html_safe %></p>
        </div>
      </div>
    <% end %>
  </div>
</section>
</footer>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const gridItems = document.querySelectorAll(".grid-item");
    gridItems.forEach(function (gridItem) {
      gridItem.addEventListener("click", function () {
        const itemContent = gridItem.querySelector(".item-content");
        itemContent.classList.toggle("expanded");
      });
    });
  });

    function filterMuscles() {
    const gridItems = document.querySelectorAll(".grid-item");
    const input = document.getElementById("muscleInput").value.toUpperCase();
    gridItems.forEach(function (gridItem) {
      const targets = gridItem.dataset.targets.toUpperCase();
      if (targets.includes(input) || input == "") {
        gridItem.style.display = "grid";
      } else {
        gridItem.style.display = "none";
      }
    });
  }
</script>
</body>
</html>
